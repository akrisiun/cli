<Project Sdk="Microsoft.NET.Sdk">

  <Import Project="$(RepoRoot)build\VersionsArcade.props" />
  <PropertyGroup>
    <TargetFrameworks>net461;netcoreapp2.0</TargetFrameworks>

    <ExcludeFromSourceBuild>false</ExcludeFromSourceBuild>

    <IsPackable>true</IsPackable>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>

    <Description>Common toolset for repositories</Description>
    <PackageTags>Roslyn Build Repository Toolset MSBuild SDK</PackageTags>
    <DevelopmentDependency>true</DevelopmentDependency>
    <PackageType>MSBuildSdk</PackageType>

    <EnableDefaultNoneItems>false</EnableDefaultNoneItems>
    <EnableGeneratedPackageContent>false</EnableGeneratedPackageContent>
	<SystemReflectionMetadataVersion>1.6.0</SystemReflectionMetadataVersion>
	<SystemCollectionsImmutableVersion>1.5.0</SystemCollectionsImmutableVersion>
    <SystemNetHttpVersion>4.3.3</SystemNetHttpVersion>

	<NewtonsoftJsonVersion>9.0.1</NewtonsoftJsonVersion>
    <NuGetVersioningVersion>4.4.0</NuGetVersioningVersion>
	<MicrosoftBuildVersion>15.7.179</MicrosoftBuildVersion>
	<MicrosoftBuildTasksCoreVersion>15.7.179</MicrosoftBuildTasksCoreVersion>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.Build" Version="$(MicrosoftBuildVersion)" />
    <PackageReference Include="Microsoft.Build.Tasks.Core" Version="$(MicrosoftBuildTasksCoreVersion)" />
    <PackageReference Include="NuGet.Versioning" Version="$(NuGetVersioningVersion)" />
    <PackageReference Include="System.Net.Http" Version="$(SystemNetHttpVersion)" />
    <PackageReference Include="System.Collections.Immutable" Version="$(SystemCollectionsImmutableVersion)" />
    <PackageReference Include="System.Reflection.Metadata" Version="$(SystemReflectionMetadataVersion)" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(CliTargetFramework)' ">
    <PackageReference Include="Microsoft.NETCore.App" Version="$(MicrosoftNETSdkPackageVersion)" />
  </ItemGroup>
  
  <ItemGroup Condition=" '$(TargetFrameworkIdentifier)' == '.NETFramework' ">
    <Reference Include="System" />
    <Reference Include="System.Xml" />
    <Reference Include="Microsoft.CSharp" />
    <PackageReference Include="System.IO.Compression" Version="4.3.0" />
  </ItemGroup>


  <ItemGroup>
    <None Include="sdk/Sdk.props;sdk/Sdk.targets" Pack="true">
      <PackagePath>sdk/%(Filename)%(Extension)</PackagePath>
    </None>
    <None Include="tools/**/*.*" Pack="true">
      <PackagePath>tools/%(RecursiveDir)%(Filename)%(Extension)</PackagePath>
    </None>
  </ItemGroup>

  <ItemGroup>
    <Compile Include="..\Common\AssemblyResolution.cs" Link="src\AssemblyResolution.cs" />
  </ItemGroup>

  <Import Project="$(RepoRoot)eng\BuildTask.targets" />
</Project>
